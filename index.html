<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>跳转</title>
	</head>
	<body>
        <a style="display:block;height:1000;width:2000;background:red;text-align:center;font-size:100px;" id="test">商品详情</a>
	</body>
    <script type="text/javascript">
        function cookie(name) {
            var cookies = document.cookie,
            cookieVal;
            
            if (cookies) {
                cookies = cookies.split(';');
                cookies.forEach(function (c) {
                                if (c.indexOf(name) > -1) {
                                cookieVal = decodeURIComponent($.trim(c.replace(name + '=', '')));
                                return;
                                }
                                });
            }
            
            return cookieVal;
        }
    
    function queryString() {
        var vars = {},
        hash,
        i;
        var hashes = window.location.search.slice(1).split('&');
        
        for (i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars[hash[0]] = hash[1];
        }
        return vars;
    }
    
    
    function xhrGet(url, cb) {
        
        var conn = (window.XMLHttpRequest) ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
        conn.onreadystatechange = function () {
            if (conn.readyState == 4 && conn.status == 200) {
                cb(conn.responseText)
            }
        };
        conn.open("GET", url, true);
        conn.send();
    }
    
    window.cookie = cookie;
    
    var url = 'zhbservice://zhbservice.com/goapp?openby:zhbservice={"action":"go.productDetail","params":{"productId":"e37a113be8eb47f7b1d9e332f9fc142b"},"sign":"848ef44c3d2745359aeccd96cadbdee5"}';
    var isWechat = /micromessenger/i.test(navigator.userAgent || '');
    
//     if(!isWechat){
//         document.getElementById("test").innerHTML="跳转到Safari打开";
	    alert('11111111');
	    document.getElementById("test")[0].onclick = function () {
   			alert('gggggggggg');
	   		 var shareCommnd = ["", "APXInterface", "pop", @""];
			window.webkit.messageHandlers.cordova.postMessage(shareCommnd);
		}
//     }
    
    var u = navigator.userAgent.toLowerCase();
    var isiOS = u.indexOf('os') > -1 || u.indexOf('iphone') > -1 || u.indexOf('mac') > -1 || u.indexOf('ipad') > -1;
    
    
    var androidExp = new RegExp('MQQBrowser');//安卓QQ内置浏览器正则
    var isAndroidQQ = androidExp.test(navigator.userAgent);  //判断是不是QQ内置浏览器
    
    var version, type, appid, td, params;
    
    params = queryString();
    
    if(params.union_type){
        url = 'yohobuy://yohobuy.com/goapp?ct='+params.union_type+'&openby:yohobuy={"action":"go.home","params":{"gender":"1","channel":"2"}}';
    }
    
    if (isiOS) {
        var regStr_saf = /os [\d._]*/gi;
        var verinfo = u.match(regStr_saf);
        
        version = (verinfo + '').replace(/[^0-9|_.]/ig, '').replace(/_/ig, '.');
        type = 'ios';
        appid = '1116559668';
        td = window.screen.width + '_' + window.screen.height + '_' + type + '_' + version;
        
    } else if (u.indexOf('android') > -1 || u.indexOf('linux') > -1) {
        type = 'android';
        appid = 'com.yoho';
        try {
            var indextd = u.indexOf('_td');
            var index = u.indexOf(' build');
            var preString = '';
            
            if (indextd > -1) {
                preString = u.substr(0, indextd);
                preString = preString.substr(preString.lastIndexOf(";") + 1);
                preString = preString.replace(/\s+/g, '').replace(/_/ig, '');
                
                var sansungIndex = preString.indexOf('samsung-');
                if (sansungIndex > -1) {
                    preString = preString.substr(8);
                }
            } else if (index > -1) {
                preString = u.substr(0, index);
                preString = preString.substr(preString.lastIndexOf(";") + 1);
                preString = preString.replace(/\s+/g, '').replace(/_/ig, '');
                //alert(preString);
            }
            deviceType = preString;
            version = u.substr(u.indexOf('android') + 8, 3);
            td = deviceType + '_' + type + '_' + version;
        } catch (e) {
            
        }
    }
    
    
    var appPath = url;
    var ifr;
    </script>
    <script>
        (function (w, d, s, j, f) {
         var a = d.createElement(s);
         var m = d.getElementsByTagName(s)[0];
         
         w.YohoAcquisitionObject = f;
         
         w[f] = function () {
         w[f].p = arguments;
         };
         
         a.async = 1;
         a.src = j;
         m.parentNode.insertBefore(a, m);
         }(window, document, 'script', (document.location.protocol === 'https:' ? 'https:' : 'http:') + '//cdn.yoho.cn/yas-jssdk/2.2.1/yas.js', '_yas'));
         

        </script>

</html>
